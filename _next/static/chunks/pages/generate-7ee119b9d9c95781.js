(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1343],{27149:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r,i=n(2784),a=n(13806),o=n(98135),l=n(38457);let s=(r||(r=n.t(i,2))).useSyncExternalStore;function u(e,t={}){let n=(0,l.Z)(),r="undefined"!=typeof window&&void 0!==window.matchMedia,{defaultMatches:u=!1,matchMedia:c=r?window.matchMedia:null,ssrMatchMedia:d=null,noSsr:Z=!1}=(0,o.Z)({name:"MuiUseMediaQuery",props:t,theme:n}),h="function"==typeof e?e(n):e;return(void 0!==s?function(e,t,n,r,a){let o=i.useCallback(()=>t,[t]),l=i.useMemo(()=>{if(a&&n)return()=>n(e).matches;if(null!==r){let{matches:t}=r(e);return()=>t}return o},[o,e,r,a,n]),[u,c]=i.useMemo(()=>{if(null===n)return[o,()=>()=>{}];let t=n(e);return[()=>t.matches,e=>(t.addListener(e),()=>{t.removeListener(e)})]},[o,n,e]);return s(c,u,l)}:function(e,t,n,r,o){let[l,s]=i.useState(()=>o&&n?n(e).matches:r?r(e).matches:t);return(0,a.Z)(()=>{let t=!0;if(!n)return;let r=n(e),i=()=>{t&&s(r.matches)};return i(),r.addListener(i),()=>{t=!1,r.removeListener(i)}},[e,n]),l})(h=h.replace(/^@media( ?)/m,""),u,c,d,Z)}},81753:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/generate",function(){return n(10452)}])},10452:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n(52903),i=n(30433),a=n(6372),o=n(34360),l=n(19764),s=n(46170),u=n(10934),c=n(8033),d=n(91430),Z=n(98996),h=n(60108),p=n(22063),f=n(63462),m=n(83446),E=n(80458),S=n(38045),w=n(25683),_=n(29650),R=n(50267),v=n(24991),P=n(5632),x=n(2784),C=n(12595),y=e=>{let{appContext:t}=e,{logout:n}=t,[y,A]=(0,x.useState)(),[b,T]=(0,x.useState)(),[g,N]=(0,x.useState)(!1),[I,k]=(0,x.useState)(!0),O=(0,P.useRouter)();(0,x.useEffect)(()=>{(async()=>{let e=(0,R.km)(R.Qm.ENCRYPTION_KEY),t=(0,w.Yu)(w.Pd.ORIGINAL_KEY_ATTRIBUTES),n=(0,w.Yu)(w.Pd.USER);T(n),(null==n?void 0:n.token)?e?(0,_.fo)()?(N(!0),k(!1)):O.push(C.Pm):(null==t?void 0:t.encryptedKey)?O.push(o.q.CREDENTIALS):(A(n.token),k(!1)):O.push("/")})(),t.showNavBar(!0)},[]);let H=async(e,t)=>{try{let{keyAttributes:t,masterKey:n,srpSetupAttributes:r}=await (0,s.j)(e);await (0,i.p6)((0,c.zx)(y),t),await (0,l.Bs)(r),await (0,S.iv)(e,t,n),await (0,S.CP)(R.Qm.ENCRYPTION_KEY,n),(0,_.n_)(!0),N(!0)}catch(e){u.ZP.error("failed to generate password",e),t("passphrase",(0,v.t)("PASSWORD_GENERATION_FAILED"))}};return(0,r.tZ)(r.HY,{children:I||!b?(0,r.tZ)(d.wx,{children:(0,r.tZ)(Z.Z,{})}):g?(0,r.tZ)(E.Z,{show:g,onHide:()=>{N(!1),O.push(C.Pm)},somethingWentWrong:()=>{}}):(0,r.tZ)(d.wx,{children:(0,r.BX)(h.Z,{children:[(0,r.tZ)(f.Z,{children:(0,v.t)("SET_PASSPHRASE")}),(0,r.tZ)(a.Z,{userEmail:b.email,callback:H,buttonText:(0,v.t)("SET_PASSPHRASE")}),(0,r.tZ)(p.Z,{children:(0,r.tZ)(m.Z,{onClick:n,children:(0,v.t)("GO_BACK")})})]})})})},A=n(55005),b=()=>(0,r.tZ)(y,{appContext:(0,A.useAppContext)()})},40947:function(e,t,n){"use strict";var r=n(71600);t.Z=void 0;var i=r(n(84198)),a=n(52322);t.Z=(0,i.default)((0,a.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy")},6372:function(e,t,n){"use strict";var r=n(52903),i=n(39596),a=n(39382),o=n(43643),l=n(42541),s=n(84381),u=n(53793),c=n(58488),d=n(31708),Z=n(24991),h=n(2784),p=n(98614),f=n(48601),m=n(49354);t.Z=function(e){let[t,n]=(0,h.useState)(!1),[E,S]=(0,h.useState)(!1),w=()=>{S(!E)},_=e=>{e.preventDefault()},R=async(t,r)=>{let{setFieldError:i}=r;n(!0);try{let{passphrase:n,confirm:r}=t;n===r?await e.callback(n,i):i("confirm",(0,Z.t)("PASSPHRASE_MATCH_ERROR"))}catch(t){let e=t instanceof Error?t.message:"";i("confirm","".concat((0,Z.t)("UNKNOWN_ERROR")," ").concat(e))}finally{n(!1)}};return(0,r.tZ)(d.J9,{initialValues:{passphrase:"",confirm:""},validationSchema:f.Ry().shape({passphrase:f.Z_().required((0,Z.t)("REQUIRED")),confirm:f.Z_().required((0,Z.t)("REQUIRED"))}),validateOnChange:!1,validateOnBlur:!1,onSubmit:R,children:n=>{let{values:d,errors:h,handleChange:f,handleSubmit:S}=n;return(0,r.BX)("form",{noValidate:!0,onSubmit:S,children:[(0,r.tZ)(l.Z,{mb:2,color:"text.muted",variant:"small",children:(0,Z.t)("ENTER_ENC_PASSPHRASE")}),(0,r.tZ)(s.Z,{sx:{display:"none"},name:"email",id:"email",autoComplete:"username",type:"email",value:e.userEmail}),(0,r.tZ)(u.Z,{fullWidth:!0,name:"password",id:"password",autoComplete:"new-password",type:E?"text":"password",label:(0,Z.t)("PASSPHRASE_HINT"),value:d.passphrase,onChange:f("passphrase"),error:!!h.passphrase,helperText:h.passphrase,autoFocus:!0,disabled:t,InputProps:{endAdornment:(0,r.tZ)(a.Z,{showPassword:E,handleClickShowPassword:w,handleMouseDownPassword:_})}}),(0,r.tZ)(u.Z,{fullWidth:!0,name:"confirm-password",id:"confirm-password",autoComplete:"new-password",type:"password",label:(0,Z.t)("CONFIRM_PASSPHRASE"),value:d.confirm,onChange:f("confirm"),disabled:t,error:!!h.confirm,helperText:h.confirm}),(0,r.tZ)(m.L,{password:d.passphrase}),(0,r.tZ)(l.Z,{my:2,variant:"small",children:(0,r.tZ)(p.cC,{i18nKey:"PASSPHRASE_DISCLAIMER"})}),(0,r.BX)(c.Z,{my:4,children:[(0,r.tZ)(o.Z,{sx:{my:0},loading:t,buttonText:e.buttonText,disabled:(0,i.DZ)(d.passphrase)}),t&&(0,r.tZ)(l.Z,{textAlign:"center",mt:1,color:"text.muted",variant:"small",children:(0,Z.t)("KEY_GENERATION_IN_PROGRESS_MESSAGE")})]})]})}})}},52535:function(e,t,n){"use strict";n.d(t,{I:function(){return a},T:function(){return o}});var r=n(27149),i=n(84001);let a=()=>(0,r.Z)((0,i.Z)().breakpoints.down("sm")),o=()=>(0,r.Z)("(hover: none) and (pointer: coarse)",{noSsr:!0})},92549:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(52903),i=n(40947),a=n(53819),o=n(35999),l=n(53091),s=n(24991),u=n(2784);function c(e){let{code:t,color:n,size:c}=e,[d,Z]=(0,u.useState)(!1);return(0,r.tZ)(o.Z,{arrow:!0,open:d,title:(0,s.t)("COPIED"),PopperProps:{sx:{zIndex:2e3}},children:(0,r.tZ)(l.Z,{onClick:()=>{navigator.clipboard.writeText(t),Z(!0),setTimeout(()=>Z(!1),1e3)},color:n,children:d?(0,r.tZ)(a.Z,{fontSize:null!=c?c:"small"}):(0,r.tZ)(i.Z,{fontSize:null!=c?c:"small"})})})}},93727:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var r=n(73235),i=n(52903),a=n(98996),o=n(31572);n(2784);var l=n(92549),s=n(91430),u=n(58488);function c(){let e=(0,r._)(["\n    position: relative;\n    background: ",";\n    border-radius: ","px;\n    min-height: 80px;\n"]);return c=function(){return e},e}function d(){let e=(0,r._)(["\n    position: absolute;\n    top: 0px;\n    right: 0px;\n    margin-top: ",";\n"]);return d=function(){return e},e}function Z(){let e=(0,r._)(["\n    padding: 16px 36px 16px 16px;\n    border-radius: ","px;\n"]);return Z=function(){return e},e}let h=(0,o.ZP)(s.Tn)(c(),e=>{let{theme:t}=e;return t.colors.accent.A700},e=>{let{theme:t}=e;return t.shape.borderRadius}),p=(0,o.ZP)(u.Z)(d(),e=>{let{theme:t}=e;return t.spacing(1)}),f=(0,o.ZP)("div")(Z(),e=>{let{theme:t}=e;return t.shape.borderRadius});function m(){let e=(0,r._)(["\n    word-break: break-word;\n    min-width: 30%;\n    text-align: left;\n"]);return m=function(){return e},e}function E(e){let{code:t,...n}=e;return t?(0,i.BX)(h,{...n,children:[(0,i.tZ)(f,{children:(0,i.tZ)(S,{children:t})}),(0,i.tZ)(p,{children:(0,i.tZ)(l.Z,{code:t})})]}):(0,i.tZ)(h,{children:(0,i.tZ)(a.Z,{})})}let S=(0,o.ZP)("div")(m())},60108:function(e,t,n){"use strict";var r=n(31572),i=n(67295);let a=(0,r.ZP)(i.Z)(e=>{let{theme:t}=e;return{padding:t.spacing(4,2),maxWidth:"360px",width:"100%",textAlign:"left"}});t.Z=a},80458:function(e,t,n){"use strict";var r=n(52903),i=n(52535),a=n(8033),o=n(93727),l=n(99408),s=n(38045),u=n(24570),c=n(22711),d=n(38898),Z=n(42541),h=n(17699),p=n(10222),f=n(31572),m=n(58488),E=n(36832),S=n(24991),w=n(2784);E.setDefaultWordlist("english"),t.Z=function(e){let{somethingWentWrong:t,...n}=e,[f,m]=(0,w.useState)(null),R=(0,i.I)();return(0,w.useEffect)(()=>{n.show&&(async()=>{try{let e=await (0,s.yr)();m(E.entropyToMnemonic(e))}catch(e){t(),n.onHide()}})()},[n.show]),(0,r.BX)(c.Z,{fullScreen:R,open:n.show,onClose:n.onHide,maxWidth:"xs",fullWidth:!0,children:[(0,r.tZ)(l.Z,{onClose:n.onHide,children:(0,S.t)("recovery_key")}),(0,r.BX)(d.Z,{children:[(0,r.tZ)(Z.Z,{mb:3,children:(0,S.t)("RECOVERY_KEY_DESCRIPTION")}),(0,r.BX)(_,{children:[(0,r.tZ)(o.Z,{code:f}),(0,r.tZ)(Z.Z,{m:2,children:(0,S.t)("KEY_NOT_STORED_DISCLAIMER")})]})]}),(0,r.BX)(h.Z,{children:[(0,r.tZ)(p.Z,{color:"secondary",size:"large",onClick:n.onHide,children:(0,S.t)("do_this_later")}),(0,r.tZ)(p.Z,{color:"accent",size:"large",onClick:function(){(0,u.KG)("ente-recovery-key.txt",(0,a.zx)(f)),n.onHide()},children:(0,S.t)("save_key")})]})]})};let _=(0,f.ZP)(m.Z)(e=>{let{theme:t}=e;return{border:"1px dashed ".concat(t.palette.grey.A400),borderRadius:t.spacing(1)}})}},function(e){e.O(0,[1981,1708,4373,9668,5999,3432,3692,9049,2888,9774,179],function(){return e(e.s=81753)}),_N_E=e.O()}]);